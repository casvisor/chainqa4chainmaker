# ChainQA4chainmaker

é¢å‘è…¾è®¯äº‘-é•¿å®‰é“¾ï¼ˆV2.2ç‰ˆæœ¬ï¼‰çš„ChainQAï¼ˆåŒºå—é“¾å®¡è®¡ä¸æŸ¥è¯¢å¹³å°ï¼‰



## é¡¹ç›®æ¶æ„è¯´æ˜

- backï¼šåç«¯ä»£ç ï¼Œä¸»è¦å¤„ç†IPFSåŠ è§£å¯†ã€è½¬æ¢Excelæ•°æ®ã€å°è£…è¯·æ±‚ç­‰åŸºç¡€æ“ä½œ
- frontï¼šå‰ç«¯ä»£ç ï¼Œé¡µé¢å±•ç¤º
- contractï¼šéƒ¨ç½²åœ¨é•¿å®‰é“¾ï¼ˆè…¾è®¯äº‘ https://console.cloud.tencent.com/tbaas/chainmaker/chain/chainmaker-demo/basicInfo?chainId=1&demo=1ï¼‰çš„åˆçº¦ä»£ç ï¼Œ**è¯·æ³¨æ„æ­¤åˆçº¦ä»£ç ä»…é€‚é…é•¿å®‰2.1~2.2ç‰ˆæœ¬**ã€‚
- docï¼šä¸€äº›å¯ç”¨äºæµ‹è¯•çš„æ–‡æ¡£ï¼ˆexcelï¼‰
- tencent-chainmakerï¼šç”¨äºé“¾é€šåç«¯ä¸è…¾è®¯äº‘åŒºå—é“¾çš„SDKã€‚**éœ€è¿›è¡Œé…ç½®**ã€‚
- docker-compose.ymlï¼šç”¨äºå¯åŠ¨dockerçš„dockerç¼–æ’æ–‡ä»¶ã€‚

### åç«¯ï¼ˆBackï¼‰

ğŸ‘‹å¦‚åªæ˜¯**<u>å•çº¯ä½“éªŒåç«¯</u>**ï¼Œè¯·æŒ‰å¦‚ä¸‹æ–¹å¼è¿è¡Œï¼š

å®‰è£…ä¾èµ–åŒ…ï¼š

```bash
go mod vendor
```

è¿è¡Œï¼š

```bash
go run main.go
```

åç«¯ç›‘å¬9000ç«¯å£ã€‚

ğŸ‘‹å¦‚æƒ³éƒ¨ç½²**<u>æ•´ä¸ª</u>é¡¹ç›®**ï¼Œè¯·å‚è§dockerç« èŠ‚ã€‚

### å‰ç«¯ï¼ˆfrontï¼‰

ğŸ‘‹å¦‚åªæ˜¯**<u>å•çº¯ä½“éªŒå‰ç«¯</u>**ï¼Œè¯·æŒ‰å¦‚ä¸‹æ–¹å¼è¿è¡Œï¼š

éœ€æå‰å®‰è£…nodeã€yarnã€‚

è¿è¡Œ(å‰ç«¯è°ƒè¯•ç¯å¢ƒä¸‹)ï¼š

```bash
yarn dev
```

ğŸ‘‹å¦‚æƒ³éƒ¨ç½²**<u>æ•´ä¸ª</u>é¡¹ç›®**ï¼Œè¯·å‚è§dockerç« èŠ‚ã€‚

### åŒºå—é“¾æ™ºèƒ½åˆçº¦

ä½äºcontractæ–‡ä»¶å¤¹ä¸‹ã€‚

å…¶ä¸­`tencentChainqaContractV221demo01.7z`ä¸ºç¼–è¯‘åçš„ç‰ˆæœ¬ã€‚`src`ä¸ºæºä»£ç æ–‡ä»¶å¤¹ã€‚

> è¯·æ³¨æ„æœ¬æ–‡ä»¶çš„åˆçº¦ä»£ç ä»…é€‚é…é•¿å®‰2.1~2.2ç‰ˆæœ¬ï¼Œå¯éƒ¨ç½²è‡³[è…¾è®¯äº‘é•¿å®‰é“¾](https://console.cloud.tencent.com/tbaas/chainmaker/chain/chainmaker-demo/basicInfo?chainId=1&demo=1)

åˆçº¦åå»ºè®®ä¸ºï¼š`tencentChainqaContractV221demo01`ï¼ˆå¦åˆ™éœ€è¦åœ¨å‰ç«¯æ›´æ”¹åˆçº¦åï¼‰

![åˆçº¦æ–¹æ³•](./doc/img/contract-method.png)

### tencent-chainmaker

ä¸»è¦æ˜¯åç«¯ä¸ [è…¾è®¯äº‘é•¿å®‰é“¾](https://console.cloud.tencent.com/tbaas/chainmaker/chain/chainmaker-demo/basicInfo?chainId=1&demo=1) <u>**äº¤äº’ï¼ˆè°ƒç”¨åˆçº¦ï¼‰**</u>çš„ç³»ç»Ÿã€‚æ˜¯å¯¹è…¾è®¯äº‘æä¾›çš„åŒºå—é“¾äº¤äº’çš„SDKçš„äºŒæ¬¡å°è£…

æœ¬å†…å®¹éœ€è¦è¿›è¡Œé…ç½®ï¼š

1. å‰å¾€[è…¾è®¯äº‘API](https://console.cloud.tencent.com/cam/capi) é¡µé¢ï¼Œç”³è¯·å¯†é’¥ï¼Œä¿å­˜SecretIdå’ŒSecretKey
2. è¿›å…¥`/tencent-chainmaker/conf/config.ini`æ–‡ä»¶ï¼Œå¡«å…¥ç›¸åº”éƒ¨åˆ†

> å¯†é’¥æ˜¯é«˜å±éƒ¨åˆ†ï¼ä¸èƒ½ä»¥ä»»ä½•å½¢å¼å…¬å¼€ï¼éœ€å¦¥å–„ä¿ç®¡

> ä¸ºä»€ä¹ˆéœ€è¦è¿™ä¸ªpartï¼Œå› ä¸ºæ•´ä½“çš„é“¾è·¯æ˜¯è¿™æ ·çš„
>
> å‰ç«¯â€”â€”â€”åç«¯â€”â€”â€“tencent-chainmakerâ€”â€”â€”é•¿å®‰é“¾

### docker

ä¸‹é¢è®²è§£å¦‚ä½•é…ç½®dockerï¼Œæ‰“åŒ…ä¸ºdockerè¿è¡Œã€‚

ã€ç¬¬ä¸€æ­¥ï¼šæ‰“åŒ…å‰ç«¯ã€‘ï¼ˆå¯é€‰ï¼šè‹¥å¯¹å‰ç«¯æºä»£ç è¿›è¡Œäº†ä¿®æ”¹ï¼Œéœ€è¦æŒ‰ç…§æœ¬æ­¥éª¤é‡æ–°æ‰“åŒ…ï¼‰

- å®‰è£…[node](https://blog.csdn.net/muzidigbig/article/details/80493880)ã€[yarn](https://blog.csdn.net/qq_63055262/article/details/135776853)ä¸¤ä¸ªå‰ç«¯å·¥å…·
- åˆ‡æ¢åˆ°å‰ç«¯ç›®å½•ï¼ˆ`/front`ï¼‰ï¼Œè¿è¡Œ`yarn build`
- ç¨ç­‰ä¸€ä¼šï¼Œå°±ä¼šåœ¨`/front/dist`æ–‡ä»¶å¤¹ä¸‹ç”Ÿæˆå‰ç«¯æ‰“åŒ…æ–‡ä»¶ï¼ˆæ–‡ä»¶ä¸­åŸ`/front/dist`ç›®å½•ä¸‹å·²ç»å­˜æ”¾äº†å‰ç«¯æ‰“åŒ…æ–‡ä»¶ï¼Œå¯ç›´æ¥ä½¿ç”¨ã€‚è‹¥å¯¹æºä»£ç è¿›è¡Œäº†ä¿®æ”¹ï¼Œéœ€è¦æŒ‰ç…§æœ¬æ­¥éª¤é‡æ–°æ‰“åŒ…ï¼‰

ã€ç¬¬äºŒæ­¥ï¼šå‰ç«¯æ‰“åŒ…æ–‡ä»¶æ”¾åˆ°åç«¯æ–‡ä»¶å¤¹ã€‘ï¼ˆå¯é€‰ï¼šè‹¥å¯¹å‰ç«¯æºä»£ç è¿›è¡Œäº†ä¿®æ”¹ï¼Œéœ€è¦æŒ‰ç…§æœ¬æ­¥éª¤æ‰§è¡Œï¼Œå¦åˆ™å¯ä»¥è·³è¿‡ï¼Œå› ä¸ºç›®å‰åç«¯æœ‰è¿™æ ·ä¸€ä»½ä»£ç ï¼‰

- å°†`/front/dist`æ•´ä½“å¤åˆ¶åˆ°`/back/dist`ï¼Œå…¶ä»–ä»€ä¹ˆéƒ½ä¸ç”¨å¹²

ã€ç¬¬ä¸‰æ­¥ï¼šé…ç½®tencent-chainmakerã€‘

- è¯·æŒ‰æœ¬æ–‡æ¡£tencent-chainmakeréƒ¨åˆ†è¿›è¡Œé…ç½®SecretIdå’ŒSecretKey

ã€ç¬¬å››æ­¥ï¼šå®‰è£…åŒºå—é“¾æ™ºèƒ½åˆçº¦ã€‘

- è¯·æŒ‰æœ¬æ–‡æ¡£åŒºå—é“¾æ™ºèƒ½åˆçº¦éƒ¨åˆ†é…ç½®

ã€ç¬¬äº”æ­¥ï¼šå®¹å™¨å¯åŠ¨ï¼ã€‘

åˆ‡æ¢åˆ°æ ¹ç›®å½•ä¸‹ï¼Œè¿è¡Œï¼š

```bash
docker-compose up -d
```

è¿™æ ·å°±ä¼šè‡ªåŠ¨å¯åŠ¨æ ¹ç›®å½•ä¸‹çš„`docker-compose.yml`ï¼Œ`yml`ä¸­åˆå®šä¹‰äº†ä¸¤ä¸ªå®¹å™¨ï¼ˆä¸€ä¸ªæ˜¯åç«¯ï¼Œä¸€ä¸ªæ˜¯tencent-chainmakerã€‚ç¬¬äºŒæ­¥ä¸­å‰ç«¯å·²ç»æ‰“åŒ…æ”¾å…¥åç«¯äº†ï¼Œæ‰€ä»¥æ²¡æœ‰å‰ç«¯å®¹å™¨ï¼‰ã€‚ç„¶åä¼šåˆ†åˆ«æŒ‰ç…§`back/Dockerfile`å’Œ`tencent-chainmaker/Dockerfile`è¿›è¡Œé•œåƒè£…è½½ï¼Œç„¶åè¿›è¡Œå¯åŠ¨ã€‚

> å¦‚æœæ²¡æœ‰æ›´æ”¹é»˜è®¤é…ç½®ï¼Œåç«¯å°†è¿è¡Œåœ¨9000ï¼Œtencent-chainmakerè¿è¡Œåœ¨9001ç«¯å£

ã€ç¬¬å…­æ­¥ï¼šè¿è¡Œã€‘

æ‰“å¼€æµè§ˆå™¨ï¼Œè¾“å…¥`localhost:9000`å³å¯çœ‹åˆ°é¡µé¢ã€‚

> æ³¨ï¼šè‹¥éœ€è¦å°†åç«¯ç«¯å£å·è¿›è¡Œä¿®æ”¹ï¼Œè¯·ä¿®æ”¹`/back/conf/conf.ini`ä¸­çš„port

ã€ç¬¬ä¸ƒæ­¥ï¼šä¿®æ”¹ã€‘

![](./doc/img/modify-in-front.png)

ä½ éœ€è¦ä¿®æ”¹åç«¯å®¹å™¨çš„APIåœ°å€ï¼Œè¯·ä¿®æ”¹ç¬¬ä¸€æ¡ã€‚æ³¨æ„åªéœ€è¦ä¿®æ”¹`ä¸»æœºIP:ç«¯å£å·`çš„éƒ¨åˆ†ï¼ˆå³47.113.204.64:9000ï¼‰ï¼Œä¸»æœºIPä¸ºæœåŠ¡å™¨IPï¼ˆè‹¥ä¸ºæœ¬åœ°ç”µè„‘è¯·ä½¿ç”¨localhostï¼‰ï¼Œç«¯å£å·å¦‚æœä½ æ²¡æœ‰åœ¨é…ç½®æ–‡ä»¶`/back/conf/conf.ini`åšä»»ä½•ä¿®æ”¹ï¼Œè¯·æ²¿ç”¨9000ã€‚

ä½ å¯èƒ½éœ€è¦ä¿®æ”¹IPFSå®¹å™¨åœ°å€ã€‚æœ¬æ–‡æ¡£æ²¡æœ‰æåˆ°IPFSå®¹å™¨çš„å®‰è£…é…ç½®ï¼Œå¦‚æœéœ€è¦ï¼Œå¯ä»¥å‚è€ƒ[æˆ‘çš„è¿™ç¯‡æ–‡æ¡£](https://www.yuque.com/jjq0425/pku/cm112pwu470v3q9n)ã€‚å®‰è£…IPFSå®¹å™¨åï¼Œè®¾ç½®IPåœ°å€å³å¯ã€‚

ä½ éœ€è¦ä¿®æ”¹tencent-chainmakerå®¹å™¨çš„APIåœ°å€ï¼Œè¯·ä¿®æ”¹ç¬¬ä¸‰æ¡ã€‚æ³¨æ„åªéœ€è¦ä¿®æ”¹`ä¸»æœºIP:ç«¯å£å·`çš„éƒ¨åˆ†ï¼ˆå³47.113.204.64:9000ï¼‰ï¼Œä¸»æœºIPä¸ºæœåŠ¡å™¨IPï¼ˆè‹¥ä¸ºæœ¬åœ°ç”µè„‘è¯·æŠŠ47.113.204.64æ”¹ä¸º`host.docker.internal`æˆ–`172.17.0.1`æˆ–`localhost`ï¼Œç”±äºä¸åŒOSä¸‹çš„dockerçš„æœ¬åœ°ç¯è·¯åœ°å€ä¸åŒï¼Œè¯·æŠŠä¸Šé¢ä¸‰è€…éå†å°è¯•ä¸€éï¼‰

æœ€åä¸€ä¸ªä¸ºåˆçº¦åç§°ï¼Œæ˜¯ä½ åœ¨è…¾è®¯äº‘åŒºå—é“¾ä¸Šå¡«å†™çš„åˆçº¦çš„åç§°ã€‚

> æ³¨æ„ï¼šä¿®æ”¹åç‚¹å‡»ä¿å­˜åä»…å½“æ¬¡æµè§ˆæœ‰æ•ˆï¼**è‹¥åˆ·æ–°æµè§ˆå™¨ä¸Šè¿°é…ç½®éœ€è¦é‡æ–°è®¾ç½®**ï¼
>
> å¯ä»¥é…ç½®å¥½åï¼Œä¿®æ”¹å‰ç«¯`\front\src\stores\api.js`ç„¶åé‡æ–°æ‰“åŒ…ã€‚

